<div class="page-wrapper">
  <div class="component-wrapper">
    <h1 class="mat-h1"
        style="text-align: center; margin-top: 12px;">Project Overview</h1>

    <div class="project-list"
         dragula="PROJECTS"
         [dragulaModel]="projectService.list$|async"
         [@standardList]="(projectService.list$|async)?.length">
      <mat-card *ngFor="let project of (projectService.list$|async); trackBy:trackById;"
                class="project">
        <div class="project-color bg-400-el"
             [ngClass]="project.themeColor">
          <mat-icon class="drag-handle color-contrast"
                    svgIcon="drag_handle">
          </mat-icon>
        </div>

        <div [class.isCurrent]="project.id === (projectService.currentId$|async)"
             class="title">{{project.title}}
        </div>

        <div class="issue-providers">
          <mat-icon *ngIf="project.issueIntegrationCfgs?.JIRA?.isEnabled"
                    title="Jira Integration Configured"
                    svgIcon="jira"></mat-icon>
          <mat-icon *ngIf="project.issueIntegrationCfgs?.GITHUB?.repo"
                    title="Github Integration Configured"
                    svgIcon="github"></mat-icon>
        </div>

        <div class="controls">
          <button (click)="edit(project)"
                  color=""
                  title="Edit Project"
                  mat-mini-fab>
            <mat-icon aria-label="Edit">edit</mat-icon>
          </button>
          <button (click)="remove(project.id)"
                  *ngIf="project.id !== (projectService.currentId$|async)"
                  title="Delete Project"
                  color="warn"
                  mat-mini-fab>
            <mat-icon aria-label="Delete">delete</mat-icon>
          </button>
        </div>

      </mat-card>
    </div>

    <div class="add-new-project-wrapper">
      <button (click)="openCreateDialog()"
              color="primary"
              mat-raised-button>
        <mat-icon aria-label="Add">add</mat-icon>
        Create New
      </button>
    </div>
  </div>
</div>
