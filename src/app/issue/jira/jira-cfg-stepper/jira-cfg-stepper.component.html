<mat-horizontal-stepper [linear]="true"
                        dynamicHeight
                        #stepper>
  <mat-step [stepControl]="credentialsFormGroup">
    <form [formGroup]="credentialsFormGroup">
      <ng-template matStepLabel>Credentials</ng-template>


      <formly-form [model]="cfg"
                   [fields]="credentialsFormConfig"
                   [form]="credentialsFormGroup">
      </formly-form>

      <div class="welcome"
           [@expand]
           *ngIf="user">
        <img [src]="user.avatarUrls['48x48']"
             class="user-avatar"
             alt="User Avatar">
        <div class="welcome-txt">Login successful!<br>Welcome {{user.displayName}}!</div>
      </div>

      <div class="center-wrapper">
        <button mat-raised-button
                (click)="testCredentials()"
                [disabled]="!credentialsFormGroup.valid">
          <mat-icon *ngIf="!isTestCredentialsSuccess">import_export</mat-icon>
          <mat-icon *ngIf="isTestCredentialsSuccess">checkmark</mat-icon>
          Test Credentials
        </button>
        <button mat-raised-button
                color="primary"
                matStepperNext
                [disabled]="!credentialsFormGroup.valid">
          Next
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </div>
    </form>
  </mat-step>


  <mat-step [stepControl]="advancedSettingsFormGroup">
    <form [formGroup]="advancedSettingsFormGroup">
      <ng-template matStepLabel>Advanced</ng-template>
      <formly-form [model]="cfg"
                   [fields]="advancedSettingsFormConfig"
                   [form]="advancedSettingsFormGroup">
      </formly-form>
      <div class="center-wrapper">
        <button mat-raised-button=""
                matStepperPrevious>
          <mat-icon>arrow_backward</mat-icon>
          Back
        </button>
        <button mat-raised-button
                [disabled]="!advancedSettingsFormGroup.valid"
                color="primary"
                matStepperNext>
          <mat-icon>arrow_forward</mat-icon>
          Next
        </button>
      </div>
    </form>
  </mat-step>

  <!--<mat-step [stepControl]="thirdFormGroup">-->
  <!--<form [formGroup]="thirdFormGroup">-->
  <!--<ng-template matStepLabel>Advanced</ng-template>-->
  <!--<mat-form-field>-->
  <!--&lt;!&ndash;<input matInput&ndash;&gt;-->
  <!--&lt;!&ndash;placeholder="Address"&ndash;&gt;-->
  <!--&lt;!&ndash;formControlName="secondCtrl"&ndash;&gt;-->
  <!--&lt;!&ndash;required>&ndash;&gt;-->
  <!--</mat-form-field>-->
  <!--<div class="center-wrapper">-->
  <!--<button mat-raised-button=""-->
  <!--matStepperPrevious>Back-->
  <!--</button>-->
  <!--<button mat-raised-button=""-->
  <!--matStepperNext>Save-->
  <!--</button>-->
  <!--</div>-->
  <!--</form>-->
  <!--</mat-step>
-->
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    You are now done.
    <div class="center-wrapper">
      <button mat-raised-button=""
              matStepperPrevious>
        <mat-icon>arrow_backward</mat-icon>
        Back
      </button>
      <button mat-raised-button=""
              color="primary"
              (click)="saveCfg()">
        <mat-icon>save</mat-icon>
        Save
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
