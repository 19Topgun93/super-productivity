<div class="wrapper">
  <!--  <mat-expansion-panel>-->
  <!--    <mat-expansion-panel-header>-->
  <!--      <mat-panel-title>-->
  <!--        This is the expansion title-->
  <!--      </mat-panel-title>-->
  <!--      <mat-panel-description>-->
  <!--        This is a summary of the content-->
  <!--      </mat-panel-description>-->
  <!--    </mat-expansion-panel-header>-->

  <!--    <p>This is the primary content of the panel.</p>-->
  <!--  </mat-expansion-panel>-->


  <div class="task-title-wrapper">
    <h2 class="task-title">{{taskData.title}}</h2>
    <button mat-icon-button>
      <mat-icon>more_vert</mat-icon>
    </button>
  </div>

  <mat-expansion-panel *ngIf="taskData.subTasks?.length">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon>list</mat-icon>
      </mat-panel-title>
      <mat-panel-description>
        Sub Tasks ({{taskData.subTasks?.length}})
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div class="tab-wrapper">
      <task-list [listModelId]="taskData.id"
                 [parentId]="taskData.id"
                 [tasks]="taskData.subTasks"
                 listId="SUB"></task-list>
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel *ngIf="taskData.issueData">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <issue-header [task]="taskData"></issue-header>
      </mat-panel-title>
      <mat-panel-description>
        Github
      </mat-panel-description>
    </mat-expansion-panel-header>

    <issue-content [task]="taskData"
                   class="tab-wrapper issue-content-wrapper"></issue-content>
  </mat-expansion-panel>


  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon class="tab-header-icon">notes</mat-icon>
      </mat-panel-title>
      <mat-panel-description>
        {{T.F.TASK.ADDITIONAL_INFO.NOTES|translate}}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div class="tab-wrapper note-wrapper">
      <inline-markdown (changed)="changeTaskNotes($event)"
                       [model]="taskData.notes"
                       [isShowControls]="true"></inline-markdown>
    </div>
  </mat-expansion-panel>


  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon class="tab-header-icon">attachment</mat-icon>
      </mat-panel-title>
      <mat-panel-description>{{T.F.TASK.ADDITIONAL_INFO.ATTACHMENTS|translate:{nr: issueAttachments?.length + (localAttachments$|async)?.length} }}</mat-panel-description>
    </mat-expansion-panel-header>

    <div class="tab-wrapper attachment-list-tab-wrapper">
      <ng-container *ngIf="taskData.issueType">
        <h3 class="mat-h3"
            style="margin-bottom: 0;">{{T.F.TASK.ADDITIONAL_INFO.ISSUE_TYPE_ATTACHMENTS|translate:{issueType: taskData.issueType} }}</h3>
        <attachment-list [attachments]="issueAttachments"
                         [isDisableControls]="true"></attachment-list>
      </ng-container>
      <h3 class="mat-h3"
          style="margin-bottom: 0;">{{T.F.TASK.ADDITIONAL_INFO.LOCAL_ATTACHMENTS|translate}}</h3>
      <attachment-list [attachments]="localAttachments$|async"></attachment-list>
    </div>
  </mat-expansion-panel>
</div>
