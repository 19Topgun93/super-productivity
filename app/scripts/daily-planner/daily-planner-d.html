<div class="daily-planner">
  <h1 class="md-headline">Plan your day!</h1>
  <div class="input">
    <div class="info">
      <p>If you're done, you should spend some time
        <strong>prioritizing</strong> your tasks, by ordering them via drag and drop. You can also make a rough time estimation.
      </p>

    </div>
    <form ng-submit="vm.addTask()">
      <md-autocomplete
        md-selected-item="vm.newTask"
        md-search-text="vm.newTaskTitle"
        md-items="task in vm.getFilteredTaskSuggestions(vm.newTaskTitle)"
        md-item-text="task.title"
        md-require-match="false"
        autofocus-autocomplete
        placeholder="Select or create a task">
        <md-item-template>
          <span md-highlight-text="vm.newTaskTitle"
                md-highlight-flags="^i">{{task.title}}</span>
        </md-item-template>
      </md-autocomplete>
    </form>

    <div class="done"
         ng-show="vm.r.tasks.length >0"
         layout="row"
         layout-sm="column"
         layout-align="center center">
      <md-button class="md-raised md-primary"
                 ng-click="vm.done()">All done! Let's get to work!
      </md-button>
    </div>

    <h2 class="md-title">Tasks for today (estimated: ~{{ vm.totaleEstimate|duration}} )</h2>

    <task-list tasks="vm.r.tasks"
               current-task="vm.r.currentTask"></task-list>

    <h2 class="md-title">Tasks Backlog (for some other time; estimated: ~{{ vm.totaleEstimateBacklog|duration}} )</h2>

    <md-input-container class="md-block search"
                        flex-gt-sm>
      <label>Search Backlog</label>
      <input type="text"
             ng-model="vm.search">
    </md-input-container>

    <task-list tasks="vm.r.backlogTasks"
               filter="vm.search"
               limit-to="{{vm.limitBacklogTo}}"></task-list>


    <md-button class="md-primary"
               ng-click="vm.limitBacklogTo = false"
               ng-hide="vm.limitBacklogTo === false || vm.r.backlogTasks.length <=vm.limitBacklogTo ||vm.r.backlogTasks.length ===0">Show All {{ vm.r.backlogTasks.length }} items in Backlog
    </md-button>

    <md-button class="md-primary"
               ui-sref="done-tasks-backlog">Go To Done Backlog
    </md-button>
  </div>
</div>

