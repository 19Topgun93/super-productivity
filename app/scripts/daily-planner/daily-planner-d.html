<div class="daily-planner">
  <h1 class="md-headline">Plan your day!</h1>

  <div ng-if="!vm.step || vm.step ===0">
    <div class="input">
      <div class="info">
        <p>If you're done, you should spend some time <strong>prioritizing</strong> your tasks, by ordering them via drag and drop. You can also make a rough time estimation.</p>

      </div>
      <form ng-submit="vm.addTask()">
        <md-input-container md-no-float
                            class="md-block"
                            layout="row">
          <ng-md-icon icon="mode_edit"></ng-md-icon>

          <input class="text-input"
                 md-auto-focus
                 md-autofocus
                 ng-model="vm.newTask"
                 placeholder="Enter a task and press enter to add">

        </md-input-container>

      </form>

      <div class="done"
           layout="row"
           layout-sm="column"
           layout-align="center center">
        <md-button class="md-raised md-primary"
                   ng-click="vm.done()">All done! Let's get to work!
        </md-button>
      </div>

      <h2 class="md-title">Tasks for today (estimated: {{ vm.totaleEstimate|date:'hh:mm' }} )</h2>

      <ul class="task-list"
          dnd-list="vm.tasks">
        <li class="task"
            layout="row"
            layout-align="center center"
            dnd-draggable="task"
            dnd-effect-allowed="move"
            dnd-moved="vm.tasks.splice($index, 1);"
            ng-class="{'is-selected': vm.listModel.selected === task}"
            ng-repeat="task in vm.tasks">
          <ng-md-icon class="handle"
                      flex="none"
                      icon="drag_handle"></ng-md-icon>

          <div class="title"
               flex="auto"
               layout="row"
               layout-align="center center">
            <input type="text"
                   ng-model="task.title">
          </div>

          <div class="notes"
               flex="100"
               ng-show="task.showNotes===true">
            <label>Notes</label>
            <textarea ng-model="task.notes"
                      rows="5"
                      md-auto-focus
                      md-select-on-focus></textarea>
          </div>

          <div class="time-estimate"
               data-ng-show="task.timeEstimate">
            {{ task.timeEstimate }}
          </div>

          <md-button class="md-icon-button"
                     aria-label="time estimation"
                     ng-click="vm.estimateTime(task)">
            <ng-md-icon icon="access_time"
                        aria-label="time estimation"></ng-md-icon>
          </md-button>

          <md-button class="md-icon-button"
                     aria-label="notes"
                     ng-click="task.showNotes=!task.showNotes">
            <ng-md-icon icon="mode_comment"
                        aria-label="notes"></ng-md-icon>
          </md-button>
          <md-button class="md-icon-button"
                     aria-label="delete"
                     ng-click="vm.tasks.splice($index, 1)">
            <ng-md-icon icon="delete_forever"
                        aria-label="delete"
                        style="fill: red;"></ng-md-icon>
          </md-button>
        </li>
      </ul>

      <h2 class="md-title">Tasks Backlog (for some other time)</h2>
      <ul class="task-list task-list__backlog"
          dnd-list="vm.backlogTasks">
        <li class="task"
            layout="row"
            layout-align="center center"
            dnd-draggable="task"
            dnd-effect-allowed="move"
            dnd-moved="vm.backlogTasks.splice($index, 1);"
            ng-class="{'is-selected': vm.listModel.selected === task}"
            ng-repeat="task in vm.backlogTasks|limitTo:vm.limitBacklogTo">
          <ng-md-icon class="handle"
                      flex="none"
                      icon="drag_handle"></ng-md-icon>

          <div class="title"
               flex="auto"
               layout="row"
               layout-align="center center">
            <input type="text"
                   ng-model="task.title">
          </div>

          <div class="notes"
               flex="100"
               ng-show="task.showNotes===true">
            <label>Notes</label>
            <textarea ng-model="task.notes"
                      rows="5"
                      md-auto-focus
                      md-select-on-focus></textarea>
          </div>

          <div class="time-estimate"
               data-ng-show="task.timeEstimate">
            {{ task.timeEstimate }}
          </div>

          <md-button class="md-icon-button"
                     ng-click="vm.estimateTime(task)">
            <ng-md-icon icon="access_time"
                        aria-label="notes"></ng-md-icon>
          </md-button>

          <md-button class="md-icon-button"
                     ng-click="task.showNotes=!task.showNotes">
            <ng-md-icon icon="mode_comment"
                        aria-label="notes"></ng-md-icon>
          </md-button>
          <md-button class="md-icon-button"
                     ng-click="vm.backlogTasks.splice($index, 1)">
            <ng-md-icon icon="delete_forever"
                        aria-label="delete"
                        style="fill: red;"></ng-md-icon>
          </md-button>

        </li>
      </ul>

      <md-button class="md-primary"
                 ng-click="vm.limitBacklogTo = false"
                 ng-hide="vm.limitBacklogTo === false || vm.backlogTasks.length <=vm.limitBacklogTo ||vm.backlogTasks.length ===0">Show All {{ vm.backlogTasks.length }} items in Backlog
      </md-button>
    </div>
  </div>

</div>